"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createConsentStampingMiddleware = void 0;
/**
 * Create analytics addSourceMiddleware fn that stamps each event
 */
const createConsentStampingMiddleware = (getCategories) => {
    const fn = async ({ payload, next }) => {
        payload.obj.context.consent = {
            ...payload.obj.context.consent,
            categoryPreferences: await getCategories(),
        };
        next(payload);
    };
    return fn;
};
exports.createConsentStampingMiddleware = createConsentStampingMiddleware;
//# sourceMappingURL=consent-stamping.js.map